============================= test session starts =============================
platform win32 -- Python 3.13.7, pytest-9.0.2, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\pault\Documents\3. AI and Machine Learning\2. Deep Learning\1c. App\Projects\agents-backend
configfile: pyproject.toml
plugins: anyio-4.10.0, Faker-25.0.0, langsmith-0.4.23, asyncio-1.3.0, cov-4.1.0, django-4.5.2, mock-3.11.1, xdist-3.3.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 43 items

backend/tests/unit/test_metrics_service.py::TestModelPricing::test_get_model_pricing_exact_match PASSED [  2%]
backend/tests/unit/test_metrics_service.py::TestModelPricing::test_get_model_pricing_partial_match PASSED [  4%]
backend/tests/unit/test_metrics_service.py::TestModelPricing::test_get_model_pricing_unknown_model PASSED [  6%]
backend/tests/unit/test_metrics_service.py::TestModelPricing::test_model_pricing_database_count PASSED [  9%]
backend/tests/unit/test_metrics_service.py::TestCreditCalculation::test_calculate_credits_basic PASSED [ 11%]
backend/tests/unit/test_metrics_service.py::TestCreditCalculation::test_calculate_credits_with_cache PASSED [ 13%]
backend/tests/unit/test_metrics_service.py::TestCreditCalculation::test_calculate_credits_gpt4o_mini PASSED [ 16%]
backend/tests/unit/test_metrics_service.py::TestCreditCalculation::test_calculate_credits_zero_tokens PASSED [ 18%]
backend/tests/unit/test_metrics_service.py::TestTrackLLMUsage::test_track_llm_usage_new_session PASSED [ 20%]
backend/tests/unit/test_metrics_service.py::TestTrackLLMUsage::test_track_llm_usage_existing_session PASSED [ 23%]
backend/tests/unit/test_metrics_service.py::TestTrackLLMUsage::test_track_llm_usage_deducts_credits PASSED [ 25%]
backend/tests/unit/test_metrics_service.py::TestGetSessionMetrics::test_get_session_metrics_found PASSED [ 27%]
backend/tests/unit/test_metrics_service.py::TestGetSessionMetrics::test_get_session_metrics_not_found PASSED [ 30%]
backend/tests/unit/test_credit_service.py::TestCreditBalance::test_get_user_credits_returns_balance PASSED [ 32%]
backend/tests/unit/test_credit_service.py::TestCreditBalance::test_get_user_credits_user_not_found PASSED [ 34%]
backend/tests/unit/test_credit_service.py::TestCreditDeduction::test_has_sufficient_credits_true PASSED [ 37%]
backend/tests/unit/test_credit_service.py::TestCreditDeduction::test_has_sufficient_credits_false PASSED [ 39%]
backend/tests/unit/test_credit_service.py::TestCreditAddition::test_add_user_credits_regular PASSED [ 41%]
backend/tests/unit/test_credit_service.py::TestCreditAddition::test_add_user_credits_bonus PASSED [ 44%]
backend/tests/unit/test_credit_service.py::TestSessionMetrics::test_accumulate_session_metrics_new_session PASSED [ 46%]
backend/tests/unit/test_credit_service.py::TestSessionMetrics::test_accumulate_session_metrics_existing_session PASSED [ 48%]
backend/tests/unit/test_ptc_tools.py::TestPTCToolImports::test_import_ptc_tools_package PASSED [ 51%]
backend/tests/unit/test_ptc_tools.py::TestPTCToolImports::test_all_exports PASSED [ 53%]
backend/tests/unit/test_ptc_tools.py::TestToolFactories::test_create_filesystem_tools_returns_tuple PASSED [ 55%]
backend/tests/unit/test_ptc_tools.py::TestToolFactories::test_create_bash_tool PASSED [ 58%]
backend/tests/unit/test_ptc_tools.py::TestToolFactories::test_create_glob_tool PASSED [ 60%]
backend/tests/unit/test_ptc_tools.py::TestToolFactories::test_create_grep_tool PASSED [ 62%]
backend/tests/unit/test_ptc_tools.py::TestGetAllTools::test_get_all_tools_returns_list PASSED [ 65%]
backend/tests/unit/test_ptc_tools.py::TestGetAllTools::test_get_all_tools_contains_expected_tools PASSED [ 67%]
backend/tests/unit/test_ptc_tools.py::TestStorageModule::test_import_storage_module PASSED [ 69%]
backend/tests/unit/test_ptc_tools.py::TestStorageModule::test_is_storage_enabled_returns_bool PASSED [ 72%]
backend/tests/unit/test_slides_api.py::TestSlidesImport::test_slides_module_import PASSED [ 74%]
backend/tests/unit/test_slides_api.py::TestSlidesImport::test_router_exists PASSED [ 76%]
backend/tests/unit/test_slides_api.py::TestSlidesImport::test_presentation_info_model PASSED [ 79%]
backend/tests/unit/test_slides_api.py::TestSlidesImport::test_slide_info_model PASSED [ 81%]
backend/tests/unit/test_slides_api.py::TestSlideHelperFunctions::test_parse_slide_number_standard PASSED [ 83%]
backend/tests/unit/test_slides_api.py::TestSlideHelperFunctions::test_parse_slide_number_numbered_prefix PASSED [ 86%]
backend/tests/unit/test_slides_api.py::TestSlideHelperFunctions::test_parse_slide_number_just_number PASSED [ 88%]
backend/tests/unit/test_slides_api.py::TestSlideHelperFunctions::test_parse_slide_number_no_match PASSED [ 90%]
backend/tests/unit/test_slides_api.py::TestRouterConfiguration::test_router_has_presentations_endpoint PASSED [ 93%]
backend/tests/unit/test_slides_api.py::TestRouterConfiguration::test_router_has_slides_endpoints PASSED [ 95%]
backend/tests/unit/test_slides_api.py::TestSlideExportDependencies::test_pypdf_import PASSED [ 97%]
backend/tests/unit/test_slides_api.py::TestSlideExportDependencies::test_playwright_import PASSED [100%]

============================== warnings summary ===============================
backend/tests/unit/test_metrics_service.py: 24 warnings
  C:\Users\pault\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:319: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.12/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    warnings.warn(

backend/tests/unit/test_metrics_service.py::TestTrackLLMUsage::test_track_llm_usage_new_session
backend/tests/unit/test_metrics_service.py::TestTrackLLMUsage::test_track_llm_usage_deducts_credits
  C:\Users\pault\Documents\3. AI and Machine Learning\2. Deep Learning\1c. App\Projects\agents-backend\backend\app\agent\service\metrics_service.py:224: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    db_session.add(metrics_record)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

backend/tests/unit/test_credit_service.py::TestSessionMetrics::test_accumulate_session_metrics_new_session
  C:\Users\pault\Documents\3. AI and Machine Learning\2. Deep Learning\1c. App\Projects\agents-backend\backend\app\agent\service\metrics_service.py:297: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    db_session.add(metrics_record)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
====================== 43 passed, 27 warnings in 14.99s =======================
